# 将本机(PC)服务对外提供服务
```txt
本地部署公共web服务计划方案

访问路径
1. 路由器IP绑定对外提供端口: 公共IP变动问题
2. 本机固定路由器IP，用于跳转到本机
3. 本机开放防火墙出入站规则：跳转虚拟机或本地服务
4. 本机/虚拟机搭建nginx代理服务：用于代理各类服务(注意各类服务API前缀与nginx代理配置保持一致)

安全访问：
1. nginx设置白名单列表
2. 提供验证码筛选

开源服务：
1. 个人信息，博客，github，各类可公开信息
2. 实践项目
3. 开源学习
4. 个人技术文档

```

## 一、基础条件检查
确保Web服务在本地正常运行（如本地能通过http://localhost:端口访问）

记录Web服务使用的端口号（如80/443/8080等）

## 二、关键配置步骤
1. 路由器端口转发（Port Forwarding）
   * 登录路由器管理页面（通常通过浏览器访问192.168.1.1或192.168.0.1）
   * 找到「端口转发」或「虚拟服务器」设置（不同品牌路由器位置不同）
   * 添加规则示例：
    ```text
    外部端口: 8080
    内部IP: 192.168.x.x（你的电脑局域网IP）
    内部端口: 80（你的Web服务端口）
    协议: TCP（HTTP服务选择TCP）
    ```
2. 获取公网IP
   * 在路由器管理界面或通过curl ifconfig.me查看当前公网IP
   * 注意：家庭宽带通常是动态IP，重启光猫会变化

3. 动态DNS（解决动态IP问题）
   * 推荐服务：
     * 花生壳（oray.com）
     * No-IP（noip.com）
   * 在路由器中配置DDNS账户，或电脑上安装客户端软件

4. 防火墙设置
   * 电脑防火墙放行对应端口（以Windows为例）：

```powershell
netsh advfirewall firewall add rule name="Web Service" dir=in action=allow protocol=TCP localport=80
```

## 三、访问方式
完成配置后可通过以下方式访问：

```text
http://你的公网IP:外部端口
或
http://DDNS域名:外部端口
```
## 四、进阶方案（更安全稳定）
方案	|优点	|缺点
-|-|-
云服务器反向代理	|隐藏真实IP，更安全	|需要额外服务器
Tailscale/ZeroTier	|无需端口转发，加密隧道	|需要客户端安装
Cloudflare Tunnel	|完全绕过NAT限制	|需要域名

## 五、安全注意事项
* 避免使用常见端口（如80/443）
* 建议启用Web服务的密码认证
* 定期检查路由器漏洞
* 考虑使用VPN替代直接暴露（如WireGuard）

## 六、常见问题排查
1. 无法访问：
   * 检查端口转发规则是否正确
   * 用telnet 公网IP 端口测试连通性
2. IP频繁变化：
   * 必须配置DDNS服务
3. ISP限制：
   * 某些运营商封锁80/443端口，需改用非常用端口

⚠️ 注意：长期暴露家庭网络可能存在安全风险，建议仅临时测试使用，生产环境推荐云服务器方案。

